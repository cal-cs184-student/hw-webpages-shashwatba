<html>
	<head>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=default'></script>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
		<style>
			h1 {
				text-align: center;
			}

			.container {
				margin: 0 auto;
				padding: 60px 20%;
			}

			figure {
				text-align: center;
			}

			img {
				display: inline-block;
			}

			body {
				font-family: 'Inter', sans-serif;
			}
		</style>
	</head>
	<body>
		<div class="container">
		<h1>CS184/284A Spring 2025 Homework 4 Write-Up</h1>
		<div style="text-align: center;">Shashwat Bansal</div>

		<br>

		Link to webpage: <a href="https://cal-cs184-student.github.io/hw-webpages-shashwatba/hw4/index.html">https://cal-cs184-student.github.io/hw-webpages-shashwatba/hw4/index.html</a>
		
		<br>

		Link to GitHub repository: <a href="https://github.com/cal-cs184-student/sp25-hw4-shashwatbansal">https://github.com/cal-cs184-student/sp25-hw4-shashwatbansal</a>


		<figure>
			<img src="clothsim.png" alt="Cloth draped over sphere" style="width:70%"/>
			<figcaption>You can add images with captions!</figcaption>
		</figure>

		<!--
		We've already added one heading per part, to make your write-up as navigable when grading. Please fit your write-up within these sections!
		-->

		<h2>Overview</h2>
		Give a high-level overview of what you implemented in this homework. Think about what you've built as a whole. Share your thoughts on what interesting things you've learned from completing the homework.

		<h2>Part 1: Masses and springs</h2>
		<p>For this part, I implemented <code>buildGrid()</code>, populating the cloth's point masses and springs vectors.</p>
		<div style="display: flex; flex-direction: column; align-items: center;">
			<table style="width: 100%; text-align: center; border-collapse: collapse;">
			  <tr>
				<td style="text-align: center;">
				  <img src="1-1.png" width="400px"/>
				  <figcaption>pinned2.json</figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="1-2.png" width="400px"/>
				  <figcaption>pinned2.json without shearing constraints</figcaption>
				</td>
			  </tr>
			  <tr>
				<td style="text-align: center;">
				  <img src="1-3.png" width="400px"/>
				  <figcaption>pinned2.json with only shearing constraints</figcaption>
				</td>
			  </tr>
			</table>
		</div>

		<h2>Part 2: Simulation via numerical integration</h2>
		<p>Spring constant: A lower spring constant results in a lot more ripples while falling. A high spring constant results in a singular motion while falling, with a very even cloth in the final resting stage. This is because a lower spring constant simulates weaker connections between particles, like a loose net or soft fabric, resulting in more dramatic and chaotic motion. The lower spring constant also leads to more folds near the top of the sheet in the final resting stage, due to springs giving in more easily to folds and bends.</p>
		<div style="display: flex; flex-direction: column; align-items: center;">
			<table style="width: 100%; text-align: center; border-collapse: collapse;">
			  <tr>
				<td style="text-align: center;">
				  <img src="2-1.png" width="400px"/>
				  <figcaption>Low spring constant (1000)</figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="2-2.png" width="400px"/>
				  <figcaption>High spring constant (100000)</figcaption>
				</td>
			  </tr>
			</table>
		</div>
		<p>Damping: Damping simulates internal friction or air resistance. With low damping, the cloth flaps around for quite a while before coming to rest, moving back and forth about the perpendicular angle. With (very) high damping, the cloth only falls once. High dampening also results in the sheet falling in the opposite direction at the top (inward vs. outward) in the final resting stage.</p>
		<div style="display: flex; flex-direction: column; align-items: center;">
			<table style="width: 100%; text-align: center; border-collapse: collapse;">
			  <tr>
				<td style="text-align: center;">
				  <img src="2-3.png" width="400px"/>
				  <figcaption>Low damping (0.02%)</figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="2-4.png" width="400px"/>
				  <figcaption>High damping (0.75%)</figcaption>
				</td>
			  </tr>
			</table>
		</div>

		<p>Density: The high density doesn't come to complete rest (has several tiny ripples going around). The low density cloth converges rather quickly. A higher density increases the mass of the cloth particles, which leads to more inertia. This makes the cloth slower to react to forces and results in prolonged motion along with a lot more tinier folds near the top of the sheet.</p>
		<div style="display: flex; flex-direction: column; align-items: center;">
			<table style="width: 100%; text-align: center; border-collapse: collapse;">
			  <tr>
				<td style="text-align: center;">
				  <img src="2-6.png" width="400px"/>
				  <figcaption>Low density (20)</figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="2-5.png" width="400px"/>
				  <figcaption>High density (100000) (doesn't come to rest soon enough)</figcaption>
				</td>
			  </tr>
			  <tr>
				<td style="text-align: center;">
				  <img src="2-7.png" width="400px"/>
				  <figcaption>pinned4.png</figcaption>
				</td>
			  </tr>
			</table>
		</div>

		<h2>Part 3: Handling collisions with other objects</h2>
		<p>For sphere collisions, I check if a cloth particle has moved inside the sphere by measuring its distance to the center. If it has, I push the particle back to the sphere's surface along the direction from the sphere's center to the particle. I also subtract a small friction adjustment to make the cloth slide naturally across the sphere rather than sticking to it.</p>

		<p>For the plane, I detect when a particle crosses from above to below the plane between frames. If it does, I project it back onto the plane surface, slightly offsetting it to prevent visual artifacts. I also apply friction so the cloth settles smoothly instead of bouncing. Lastly, I made sure to call the <code>collide()</code> function for each <code>collision_object</code> in <code>cloth.cpp</code></p>

		<p>The cloth wraps more tightly around the sphere for lower <code>ks</code> values, and extrudes outwards near the area of collision for higher <code>ks</code>. This is because of the high spring forces resisting bending within the cloth, resulting in more of a tent kind of shape.</p>
		<div style="display: flex; flex-direction: column; align-items: center;">
			<table style="width: 100%; text-align: center; border-collapse: collapse;">
			  <tr>
				<td style="text-align: center;">
				  <img src="3-1.png" width="400px"/>
				  <figcaption>ks = 5000</figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="3-2.png" width="400px"/>
				  <figcaption>ks = 50000</figcaption>
				</td>
			  </tr>
			  <tr>
				<td style="text-align: center;">
				  <img src="3-3.png" width="400px"/>
				  <figcaption>ks = 500000</figcaption>
				</td>
				<td style="text-align: center;">
					<img src="3-4.png" width="400px"/>
					<figcaption>Mesh at rest with the plane</figcaption>
				  </td>
			  </tr>
			</table>
		</div>

		<h2>Part 4: Handling self-collisions</h2>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

		<h2>Part 5: Shaders</h2>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

		<h2>(Optional) Part 6: Extra Credit - Additional cloth simulation features!</h2>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
		
		<h2>Additional Notes (please remove)</h2>
		<ul>
			<li>You can also add code if you'd like as so: <code>code code code</code></li>
			<li>If you'd like to add math equations, 
				<ul>
					<li>You can write inline equations like so: \( a^2 + b^2 = c^2 \)</li>
					<li>You can write display equations like so: \[ a^2 + b^2 = c^2 \]</li>
				</ul>
			</li>
		</ul>
		</div>
	</body>
</html>