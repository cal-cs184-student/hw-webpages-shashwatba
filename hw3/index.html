<html>
	<head>
		<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=default'></script>
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
		<style>
			h1 {
				text-align: center;
			}

			.container {
				margin: 0 auto;
				padding: 60px 20%;
			}

			figure {
				text-align: center;
			}

			img {
				display: inline-block;
			}

			body {
				font-family: 'Inter', sans-serif;
			}
		</style>
	</head>
	<body>
		<div class="container">
		<h1>CS184/284A Spring 2025 Homework 3 Write-Up</h1>
		<div style="text-align: center;">Shashwat Bansal</div>

		<br>

		Link to webpage: <a href="https://cal-cs184-student.github.io/hw-webpages-shashwatba/hw3/index.html">https://cal-cs184-student.github.io/hw-webpages-shashwatba/hw3/index.html</a>
		Link to GitHub repository: <a href="https://github.com/cal-cs184-student/sp25-hw3-shashwatban">https://github.com/cal-cs184-student/sp25-hw3-shashwatban</a>
		
		<figure>
			<img src="cornell.png" alt="Cornell Boxes with Bunnies" style="width:70%"/>
			<figcaption>You can add images with captions!</figcaption>
		</figure>

		<!--
		We've already added one heading per part, to make your write-up as navigable when grading. Please fit your write-up within these sections!
		-->

		<h2>Overview</h2>
		Give a high-level overview of what you implemented in this homework. Think about what you've built as a whole. Share your thoughts on what interesting things you've learned from completing the homework.

		<h2>Part 1: Ray Generation and Scene Intersection</h2>
		<p>To generate camera rays, I looked at the diagram and thought about the transformations that (x, y) goes under (luckily, I didn't need to draw a diagram). Since x and y are in betweeen 0 and 1 initially, we can subtract 0.5 from both of them and multiply by 2 to have them be in the range [-1, 1] instead. Then we can scale them with the width and height of the camera space as per the boundary vertex values in the diagram. Lastly, we multiply by cWd on the left to transform to world coordinates and normalize by dividing with the norm and also set <code>min_t</code> and <code>max_t</code> as indicated in the spec.</p>
		<p>To generate pixel samples, I followed the steps laid out in the spec where I started by generating <code>ns_aa</code> samples using the <code>gridSampler->getSample()</code> method. Then, I mapped these samples to the pixel space by adding the pixel's top-left corner coordinates to the sample offsets and normalizing by the height and width of the space. This ensured that the samples were distributed uniformly within the pixel. Finally, I storedthe running sum of these samples into <code>(x, y)</code> using <code>SampleBuffer.updatePixel</code>.</p>
		<p>My implementation of ray-triangle intersections was the same as the MÃ¶ller-Trumbore algorithm in the slides. I calculated edges <code>e1</code> and <code>e2</code>, crossproducts <code>s1</code> and <code>s2</code> and the difference of the ray origin and triangle vertex <code>s</code>. Then I calculated the (t, b1, b2) vector, which required me to make sure that all values were within [0, 1]. Lastly, in the <code>intersect()</code> function only, I also updated the <code>t, primitive, bsdf and n</code> variables of the <code>isect</code> of the triangle. To calculate <code>n</code>, I dot-producted the normal vector of the triangle with (b1, b2, 1 - b1 - b2).</p>
		<p>For the ray-sphere intersection, I followed the quadratic equation intersection method in the lecture slides. I had to make a few additional checks to ensure that the discriminant was non-negative and that the t values were within the bounds of the sphere. I also had to calculate the normal vector of the sphere at the intersection point in <code>isect</code> by subtracting the center of the sphere from the intersection point and normalizing it.</p>
		<figure>
			<img src="CBSpheres.png"/>
			<figcaption>Spheres</figcaption>
		</figure>

		<p>Here is an example 2x2 gridlike structure using an HTML table. Each <b>tr</b> is a row and each <b>td</b> is a column in that row. You might find this useful for framing and showing your result images in an organized fashion.</p>
		<div style="display: flex; flex-direction: column; align-items: center;">
			<table style="width: 100%; text-align: center; border-collapse: collapse;">
			  <tr>
				<td style="text-align: center;">
				  <img src="cornell.png" width="400px"/>
				  <figcaption>Caption goes here.</figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="cornell.png" width="400px"/>
				  <figcaption>Caption goes here.</figcaption>
				</td>
			  </tr>
			  <tr>
				<td style="text-align: center;">
				  <img src="cornell.png" width="400px"/>
				  <figcaption>Caption goes here.</figcaption>
				</td>
				<td style="text-align: center;">
				  <img src="cornell.png" width="400px"/>
				  <figcaption>Caption goes here.</figcaption>
				</td>
			  </tr>
			</table>
		</div>
		
		<h2>Part 2: Bounding Volume Hierarchy</h2>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

		<h2>Part 3: Direct Illumination</h2>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

		<h2>Part 4: Global Illumination</h2>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

		<h2>Part 5: Adaptive Sampling</h2>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.

		<h2>(Optional) Part 6: Extra Credit Opportunities</h2>
		Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
		
		<h2>Additional Notes (please remove)</h2>
		<ul>
			<li>You can also add code if you'd like as so: <code>code code code</code></li>
			<li>If you'd like to add math equations, 
				<ul>
					<li>You can write inline equations like so: \( a^2 + b^2 = c^2 \)</li>
					<li>You can write display equations like so: \[ a^2 + b^2 = c^2 \]</li>
				</ul>
			</li>
		</ul>
		</div>
	</body>
</html>